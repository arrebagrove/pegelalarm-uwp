<Page
    x:Class="Pegelalarm.Views.MainView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Pegelalarm.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:maps="using:Windows.UI.Xaml.Controls.Maps"
    xmlns:cal="using:Caliburn.Micro"
    mc:Ignorable="d" RequestedTheme="Dark">

    <SplitView x:Name="SplitView" Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
               OpenPaneLength="300" DisplayMode="Inline">
        <SplitView.Pane>
            <Grid Background="{StaticResource BlueBrush}" Padding="12">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <TextBox PlaceholderText="Suche..."/>

                <TextBlock Text="Liste der Stationen" Grid.Row="1" Margin="0,12,0,12"/>
                <TextBlock Text="Überwachte Stationen" Grid.Row="2"/>

                <Rectangle Height="2" Grid.Row="3" Margin="0,12" Fill="White"/>

                <StackPanel Orientation="Vertical" Grid.Row="4">
                    <TextBlock FontSize="12">
                        <Run Text="Radius der angezeigten Stationen: "/><Run Text="{Binding DisplayRange, FallbackValue='0'}"/><Run Text="km"/>
                    </TextBlock>
                    <Slider Minimum="5" Maximum="150" Value="{Binding DisplayRange, Mode=TwoWay}"/>
                </StackPanel>

                
                
            </Grid>
        </SplitView.Pane>
        <SplitView.Content>
            <Grid>
                <maps:MapControl x:Name="Map" cal:Message.Attach="[Event MapElementClick]=[Action IconClick($eventArgs)]" ZoomInteractionMode="GestureAndControl" TiltInteractionMode="GestureAndControl" RotateInteractionMode="GestureAndControl" LandmarksVisible="True" />

                <Button FontFamily="Segoe MDL2 Assets" Content="&#xE128;" FontSize="24"
                    Width="50" Height="50" Background="{StaticResource BlueBrush}" HorizontalAlignment="Right" VerticalAlignment="Top" Click="SwitchMapStyle"/>

                <Button FontFamily="Segoe MDL2 Assets" Content="&#xE81D;" FontSize="24" Margin="0,60,0,0" cal:Message.Attach="[Event Click]=[Action GetMyLocation]"
                    Width="50" Height="50" Background="{StaticResource BlueBrush}" HorizontalAlignment="Right" VerticalAlignment="Top" />

                <Button FontFamily="Segoe MDL2 Assets" Content="&#xE700;" FontSize="24"
                    Width="50" Height="50" Background="{StaticResource BlueBrush}" HorizontalAlignment="Left" VerticalAlignment="Top" Click="SplitViewOpenClose"/>


                <StackPanel Orientation="Vertical" Visibility="{Binding IsStationInfoDisplayed, Converter={StaticResource BooleanVisibilityConverter}}" VerticalAlignment="Bottom" Background="#cc000000" Padding="12">
                    <TextBlock FontSize="18" FontWeight="Bold">
                        <Run Text="Station: "/> <Run Text="{Binding DisplayedStation.name}"/>
                    </TextBlock>
                    <TextBlock FontSize="18">
                        <Run Text="Daten: "/> <Run Text="{Binding DisplayedStation.data[0].value}"/> <Run Text="{Binding DisplayedStation.data[0].type}"/>
                        <Run Text="&#x0a;Letzte Messung: " /><Run Text="{Binding DisplayedStation.data[0].sourceDate}"/>
                        <Run Text="&#x0a;Trend: " /><Run Text="{Binding DisplayedStation.TrendString}"/>
                        <Run Text=", Situation: " /><Run Text="{Binding DisplayedStation.SituationString}"/>
                    </TextBlock>
                </StackPanel>


            </Grid>
        </SplitView.Content>
    </SplitView>
</Page>
